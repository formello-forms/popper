!function(){"use strict";var e=function(e){let t,s,n,i;const o=(e=e||{}).delay||50;function l(){t=null,i=0}return l(),function(){return s=window.scrollY,null!==t&&(i=s-t),t=s,clearTimeout(n),n=setTimeout(l,o),Number(i)}}(),t=function(e,t){const s=t&&"local"!==t.toLowerCase()?sessionStorage:localStorage,n=function(t){s.setItem(e,JSON.stringify(t))},i=function(){return null!==s.getItem(e)};return Object.freeze({set:n,get:function(){return!!i()&&JSON.parse(s.getItem(e))},exists:i,create:function(){i()||n(arguments[0]||{})},remove:function(){s.removeItem(e)}})};class s{constructor(e){this.element=e,this.happened=!1,this.storageKey="popper-dismiss",this.oldScroll=null;const{dismiss:t}=e.dataset;if(this.isItemDismissed()&&t)return!1;this.isMobile=window.matchMedia("only screen and (max-width: 767px)").matches,this.isTablet=window.matchMedia("(min-width:768px) and (max-width: 992px)").matches,this.checkDevice()}init(){this.bindOpen(),this.bindClose()}openModal(){this.closeModals(),this.element.classList.add("wp-block-popper-is-open"),this.happened=!0}closeModals(){const e=document.querySelectorAll(".wp-block-popper-is-open");for(let t=0;t<e.length;t++)e[t].classList.toggle("wp-block-popper-is-open")}closeModal(){document.body.style.overflow="auto",this.element.classList.remove("wp-block-popper-is-open");const e=document.getElementsByTagName("iframe");for(const t of e)"tox-edit-area__iframe"!==t.getAttribute("class")&&t.setAttribute("src",t.src);this.dismissModal()}dismissModal(){const{dismiss:e,anchor:t,created:s}=this.element.dataset;if(!e||!s||t)return!1;const n=new Date,i=JSON.parse(localStorage.getItem(this.storageKey))||[];if(i.some((e=>e.modalID===s)))return!1;const o=864e5*e,l={expiry:n.getTime()+o,modalID:s};localStorage.setItem(this.storageKey,JSON.stringify([...i,l]))}isItemDismissed(){const{created:e}=this.element.dataset,t=JSON.parse(localStorage.getItem(this.storageKey))||[],s=t.filter((t=>t.modalID===e));if(0===s.length)return!1;const n=s[0],i=new Date;if(n.expiry>i.getTime())return!0;const o=t.filter((e=>e!==s[0]));return localStorage.setItem(this.storageKey,JSON.stringify(o)),!1}checkDevice(){const{devices:e}=this.element.dataset;if(!e)return;const t=JSON.parse(e);!t.includes("desktop")||this.isMobile||this.isTablet||this.init(),t.includes("tablet")&&this.isTablet&&this.init(),t.includes("mobile")&&this.isMobile&&this.init()}bindOpen(){const{open:e}=this.element.dataset;switch(e){case"anchor":this.bindAnchors();break;case"pageviews":this.bindPageViews();break;case"target":this.bindTarget();break;case"scroll":this.bindOpenAfterScroll();break;case"exit":this.bindExitIntent(),this.bindExitIntentMobile();break;default:this.bindOnLoad()}}bindAnchors(){const{anchor:e}=this.element.dataset;if(!e)return!1;document.querySelectorAll(`#${e}`).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.openModal()}))}))}bindOpenAfterScroll(){document.addEventListener("scroll",(()=>{if(this.happened)return!1;const{offset:e}=this.element.dataset;if(Number(e)>=this.getScrolledPercent())return!1;this.openModal()}))}bindOnLoad(){const{time:e}=this.element.dataset;setTimeout((()=>{this.openModal()}),1e3*e)}bindExitIntent(){document.addEventListener("mouseout",(e=>{if(this.happened)return!1;e.clientY<0&&this.openModal()}))}bindExitIntentMobile(){return!!this.isMobile&&!this.happened&&void(window.onscroll=()=>{setTimeout((()=>{-1*e()>50&&this.isScrollingUp()&&this.openModal(),this.oldScroll=window.scrollY}),5e3)})}bindTarget(){const{target:e}=this.element.dataset;window.onscroll=()=>this.isScrolledIntoView(e)}bindPageViews(){document.addEventListener("DOMContentLoaded",this.hitcounter())}bindClose(){this.bindCloseButtons(),this.bindAnchorClose(),this.bindOverlayClosing(),this.bindFormClosing(),this.bindEscClosing()}bindAnchorClose(){const{anchorclose:e}=this.element.dataset;if(!e)return!1;document.querySelectorAll(`#${e}`).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),this.closeModal()}))}))}bindCloseButtons(){this.element.querySelectorAll(".wp-block-popper__close").forEach((e=>{e.addEventListener("click",(()=>{this.closeModal()}))}))}bindOverlayClosing(){const{outside:e}=this.element.dataset;if("false"===e)return!1;const t=this.element.querySelector(".wp-block-popper__overlay");if(!t)return!1;t.addEventListener("click",(e=>{e.target===t&&this.closeModal()}))}bindEscClosing(){window.addEventListener("keydown",(e=>{27===e.keyCode&&this.closeModal()}))}bindFormClosing(){const{form:e}=this.element.dataset;if("false"===e)return!1;window.addEventListener("formello-success",(()=>{setTimeout((()=>{this.closeModal()}),1e3)}))}isScrolledIntoView(e){const t=document.getElementById(e);if(!t)return!1;const s=t.getBoundingClientRect(),n=s.top,i=s.bottom;n>=0&&i<=window.innerHeight&&this.openModal()}getScrolledPercent(){const e=document.documentElement,t=document.body,s="scrollTop",n="scrollHeight";return(e[s]||t[s])/((e[n]||t[n])-e.clientHeight)*100}isScrollingUp(){return this.oldScroll>window.scrollY}hitcounter(){const e=new t("urls","sessionStorage");e.create();const s=e.get();s[window.location.href]=s.hasOwnProperty(window.location.href)?parseInt(s[window.location.href])+1:1,s.total=s.hasOwnProperty("total")?parseInt(s.total)+1:1;const{pagenum:n}=this.element.dataset;s.total>=n&&this.openModal(),e.set(s)}}document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".wp-block-popper");e.length&&e.forEach((e=>{new s(e)}))}))}();