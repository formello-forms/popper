!function(){"use strict";var e=window.wp.element,t=window.wp.components,n=window.wp.i18n,l=(window.wp.url,window.wp.api,window.wp.data);function o(o){const{type:a,rule:r,index:p,onChange:c}=o,s=(0,l.useSelect)((e=>e("core").getEntityRecords("postType",a,{per_page:-1})));let u=[],i=[];const m=r.object;return null!==s&&(u=s.map((e=>e.title.raw)),i=m.map((e=>{const t=s.find((t=>t.id===parseInt(e)));return!(void 0===t||!t)&&t.title.raw})).filter((e=>!!e))),(0,e.createElement)(t.FormTokenField,{value:i,suggestions:u,placeholder:(0,n.__)("Type to choose an item","popper"),onChange:e=>{const t=[];e.forEach((e=>{const n=s.find((t=>t.title.raw===e));void 0!==n&&t.push(n.id)})),c("object",t,p)},maxSuggestions:5})}function a(l){const[a,r]=(0,e.useState)([]),{index:p,onDelete:c,rule:s}=l;return(0,e.useEffect)((()=>{r(window.popper.positions)}),[]),(0,e.createElement)(t.Flex,{align:"start",justify:"start",className:"popper-modal-row"},(0,e.createElement)(t.FlexItem,null,(0,e.createElement)("label",{className:"components-form-token-field__label",htmlFor:"select"},(0,n.__)("Where","popper")),(0,e.createElement)("select",{onChange:e=>{l.onChange("rule",e.target.value,p)},value:s.rule,className:"components-select-control__input"},(0,e.createElement)("option",{value:""},(0,n.__)("Select one…","popper")),Object.keys(a).map(((t,n)=>(0,e.createElement)("optgroup",{label:a[t].label,key:n},Object.keys(a[t].locations).map((n=>(0,e.createElement)("option",{value:n,key:n},a[t].locations[n])))))))),["post","taxonomy"].includes((()=>{let e="";return e=s.rule.indexOf(":taxonomy:")>0?"taxonomy":s.rule.substr(0,s.rule.indexOf(":")),e})())&&(0,e.createElement)(t.FlexItem,{isBlock:!0},(0,e.createElement)(o,{onChange:l.onChange,selectedCategories:[],type:s.rule.substr(s.rule.lastIndexOf(":")+1),rule:s,index:p})),(0,e.createElement)(t.FlexItem,null,(0,e.createElement)(t.Button,{className:"popper-modal-button",icon:"no",onClick:()=>{c(p)}})))}function r(l){const[o,a]=(0,e.useState)([]),{index:r,onDelete:p}=l;return(0,e.useEffect)((()=>{a(window.popper.users)}),[]),(0,e.createElement)(t.Flex,{align:"start",justify:"start"},(0,e.createElement)(t.FlexItem,null,(0,e.createElement)("select",{onChange:e=>{l.onChange(void 0,e.target.value,r)},value:l.rule,className:"components-select-control__input"},(0,e.createElement)("option",{value:""},(0,n.__)("Select one…","popper")),Object.keys(o).map(((t,n)=>(0,e.createElement)("optgroup",{label:o[t].label,key:n},Object.keys(o[t].rules).map((n=>(0,e.createElement)("option",{value:n,key:n},o[t].rules[n])))))))),(0,e.createElement)(t.FlexItem,{align:"center"},(0,e.createElement)(t.Button,{className:"popper-modal-button",icon:"no",onClick:()=>{p(r)}})))}function p(l){const{onDelete:o,onChange:p,addRule:c,rules:s,onSelect:u,activeTab:i}=l;return(0,e.createElement)(t.TabPanel,{onSelect:u,tabs:[{name:"location",title:(0,e.createElement)("span",null,(0,n.__)("Location","popper")),description:(0,e.createElement)("p",null,(0,n.__)("Choose where you want display this popup.","popper"))},{name:"exclude",title:(0,e.createElement)("span",null,(0,n.__)("Exclude","popper")),description:(0,e.createElement)("p",null,(0,n.__)("Choose where you don't want display this popup.","popper"))},{name:"user",title:(0,e.createElement)("span",null,(0,n.__)("Users","popper")),description:(0,e.createElement)("p",null,(0,n.__)("Choose which user will see this popup.","popper"))}]},(l=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("h2",null,l.title),l.description,(0,e.createElement)(e.Fragment,null,s[i].map(((t,n)=>{const c="user"===l.name?r:a;return(0,e.createElement)(c,{onChange:p,onDelete:o,rule:t,index:n,key:n})}))),(0,e.createElement)(t.Button,{isPrimary:!0,onClick:c,className:"popper-modal-button"},(0,n.__)("Add rule","popper")))))}const c=()=>{const[l,o]=(0,e.useState)(!1),[a,r]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{}),[]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("a",{href:"#",onClick:()=>o(!0)},(0,n.__)("Edit rules","popper")),l&&(0,e.createElement)(t.Modal,{title:(0,n.__)("Rules","popper"),onRequestClose:()=>{console.log(88)},className:"popper-modal-rule"},(0,e.createElement)(p,{onDelete:onDelete,onChange:onChange,addRule:addRule,rules:rules,onSelect:()=>{console.log(645)},activeTab:activeTab})))};window.addEventListener("DOMContentLoaded",(()=>{(0,e.render)((0,e.createElement)(c,null),document.getElementById("popper-table"))}))}();